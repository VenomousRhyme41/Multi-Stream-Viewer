<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Multi-Stream Viewer</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600&family=Roboto:wght@400;500&family=Oswald:wght@500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="icon" href="https://github.githubassets.com/images/icons/emoji/unicode/1f4fa.png" type="image/png">
<style>
:root {
  --active-color: #00FF9D;
  --bg-color: #0a0a0a;
  --card-color: #1a1a1a;
  --text-color: #e0e0e0;
  --border-color: #333;
  --button-bg: #333;
}
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  scrollbar-width: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
*::-webkit-scrollbar {
  display: none;
}
body {
  background-color: var(--bg-color);
  color: var(--text-color);
  font-family: 'Roboto', sans-serif;
  padding: 20px 20px;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  overflow-x: hidden;
}
.announcement-banner {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  background-color: #ff4444;
  color: white;
  padding: 12px 50px 12px 20px;
  text-align: center;
  z-index: 10000;
  font-weight: 500;
  box-shadow: 0 2px 10px rgba(255, 68, 68, 0.3);
}
.close-announcement {
  position: absolute;
  right: 15px;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  color: white;
  font-size: 18px;
  cursor: pointer;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
}
.close-announcement:hover {
  background-color: rgba(255, 255, 255, 0.2);
  border-radius: 50%;
}
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
  position: relative;
  width: 95%;
  max-width: 1800px;
  margin-left: auto;
  margin-right: auto;
}
h1 {
  margin: 0;
  color: var(--active-color);
  font-weight: 600;
  font-size: 2.5rem;
  font-family: 'Montserrat', sans-serif;
  text-align: center;
  letter-spacing: 1px;
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
}
.github-btn {
  background-color: var(--button-bg);
  color: white;
  padding: 8px 15px;
  border-radius: 6px;
  text-decoration: none;
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 500;
  transition: all 0.2s;
}
.github-btn:hover {
  background-color: #555;
}
.global-controls {
  display: flex;
  gap: 10px;
  align-items: center;
  margin-left: auto;
}
.global-btn {
  padding: 8px 15px;
  background-color: var(--button-bg);
  color: var(--text-color);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  cursor: pointer;
  font-weight: 500;
  transition: all 0.2s;
  font-size: 14px;
}
.global-btn:hover {
  background-color: rgba(0, 255, 157, 0.2);
}
.separator {
  color: var(--border-color);
  font-weight: bold;
  padding: 0 5px;
}
.container {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  grid-template-rows: auto;
  gap: 15px;
  max-width: 1800px;
  margin: 0 auto;
  width: 95%;
  flex-grow: 1;
  margin-bottom: 10px;
}
.container.two-streams {
  grid-template-columns: repeat(2, 1fr);
}
.container.three-streams {
  grid-template-columns: repeat(3, 1fr);
}
.container.four-streams {
  grid-template-columns: repeat(2, 1fr);
}
.stream-wrapper {
  position: relative;
  background-color: var(--card-color);
  border-radius: 12px;
  overflow: hidden;
  transition: all 0.2s ease;
  box-shadow: 0 4px 20px rgba(0,0,0,0.3);
  display: flex;
  flex-direction: column;
  min-height: 300px;
}
.stream-wrapper.loaded {
  min-height: auto;
}
.stream-wrapper.active {
  border: 2px solid var(--active-color);
  box-shadow: 0 0 30px rgba(0, 255, 157, 0.3);
}
.stream-wrapper.hidden {
  display: none;
}
.left-selectors {
  position: absolute;
  top: 10px;
  left: 10px;
  z-index: 20;
  display: flex;
  flex-direction: column;
  gap: 5px;
}
.right-selectors {
  position: absolute;
  top: 10px;
  right: 10px;
  z-index: 20;
  display: flex;
  flex-direction: column;
  gap: 5px;
}
.left-selectors select,
.right-selectors select {
  padding: 8px 12px;
  background-color: var(--button-bg);
  color: var(--text-color);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s;
  width: auto;
  min-width: 0;
}
.left-selectors select:focus,
.right-selectors select:focus {
  outline: none;
  border-color: var(--active-color);
}
.left-selectors select:hover,
.right-selectors select:hover {
  background-color: #333;
}
.history-dropdown {
  position: relative;
  margin-top: 5px;
}
.history-dropdown select {
  padding: 8px 12px;
  background-color: var(--button-bg);
  color: var(--text-color);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s;
  width: 100%;
}
.history-dropdown select:focus {
  outline: none;
  border-color: var(--active-color);
}
.history-dropdown select:hover {
  background-color: #333;
}
.twitch-btn {
  padding: 8px 12px;
  background-color: var(--button-bg);
  color: var(--text-color);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s;
  width: 70px;
  height: 36px;
}
.twitch-btn:hover {
  background-color: #333;
  color: var(--text-color);
}
.twitch-modal {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-color: var(--card-color);
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 10px 50px rgba(0,0,0,0.5);
  z-index: 10000;
  max-width: 350px;
  width: 90%;
  border: 2px solid #9146FF;
  max-height: 80vh;
  overflow-y: auto;
}
.twitch-modal h2 {
  color: #9146FF;
  margin-bottom: 15px;
  text-align: center;
  font-family: 'Montserrat', sans-serif;
  font-size: 1.3rem;
}
.twitch-stream {
  display: flex;
  align-items: center;
  padding: 10px;
  border-bottom: 1px solid var(--border-color);
  gap: 12px;
}
.twitch-stream:last-child {
  border-bottom: none;
}
.twitch-pfp {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: linear-gradient(45deg, #9146FF, #6441A5);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: bold;
  font-size: 14px;
  overflow: hidden;
}
.twitch-pfp img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
.twitch-info {
  flex: 1;
}
.twitch-name {
  font-weight: 500;
  margin-bottom: 4px;
}
.twitch-viewers {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: #ff4444;
}
.red-eye {
  color: #ff4444;
  font-size: 10px;
}
.load-twitch-btn {
  padding: 6px 12px;
  background-color: var(--active-color);
  color: #111;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-weight: 500;
  font-size: 11px;
  transition: all 0.2s;
}
.load-twitch-btn:hover {
  opacity: 0.9;
}
.stream-red {
  color: #ff6b6b;
}
.stream-yellow {
  color: #ffd93d;
}
.stream-green {
  color: #6bff6b;
}
.stream-input {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 80%;
  max-width: 400px;
  z-index: 10;
  background-color: rgba(30, 30, 30, 0.95);
  padding: 25px;
  border-radius: 10px;
  text-align: center;
  border: 1px solid var(--border-color);
}
.stream-input input {
  width: 100%;
  padding: 12px 15px;
  margin-bottom: 15px;
  background-color: var(--button-bg);
  border: 1px solid var(--border-color);
  color: var(--text-color);
  border-radius: 8px;
  font-size: 15px;
  -webkit-user-select: text;
  -moz-user-select: text;
  -ms-user-select: text;
  user-select: text;
}
.stream-input button {
  padding: 12px 25px;
  background-color: var(--active-color);
  color: #111;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.2s;
  font-size: 15px;
  width: 100%;
}
.stream-input button:hover {
  opacity: 0.9;
}
.stream-iframe {
  width: 100%;
  height: 100%;
  display: none;
  border: none;
  flex-grow: 1;
  overflow: hidden;
}
.stream-controls {
  display: none;
  padding: 8px 12px;
  background-color: rgba(0,0,0,0.5);
  align-items: center;
  justify-content: space-between;
}
.stream-info {
  font-size: 14px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
  flex: 1;
  font-family: 'Oswald', sans-serif;
  letter-spacing: 0.5px;
}
.stream-buttons {
  display: flex;
  gap: 8px;
  align-items: center;
}
.favorite-btn {
  background: none;
  border: none;
  color: var(--text-color);
  cursor: pointer;
  font-size: 16px;
  transition: all 0.2s;
  padding: 4px;
}
.favorite-btn:hover {
  color: #ff6b9d;
}
.favorite-btn.favorited {
  color: #ff6b9d;
}
.control-btn {
  padding: 6px 12px;
  background-color: var(--button-bg);
  color: var(--text-color);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  cursor: pointer;
  font-weight: 500;
  transition: all 0.2s;
  font-size: 12px;
}
.control-btn:hover {
  background-color: rgba(0, 255, 157, 0.2);
}
.control-btn.active {
  background-color: var(--active-color);
  color: #111;
  border-color: transparent;
}
.theater-mode-btn {
  position: fixed;
  top: 10px;
  right: 10px;
  z-index: 1000;
  padding: 8px 15px;
  background-color: var(--button-bg);
  color: var(--text-color);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  cursor: pointer;
  font-weight: 500;
  transition: all 0.2s;
  font-size: 14px;
}
.theater-mode-btn:hover {
  background-color: rgba(0, 255, 157, 0.2);
}
.exit-theater-btn {
  position: fixed;
  top: 10px;
  right: 10px;
  z-index: 1000;
  padding: 8px 15px;
  background-color: rgba(255, 255, 255, 0.015);
  color: rgba(255, 255, 255, 0.5);
  border: 1px solid rgba(255, 255, 255, 0.05);
  border-radius: 6px;
  cursor: pointer;
  font-weight: 500;
  transition: all 0.2s;
  font-size: 14px;
}
.exit-theater-btn:hover {
  background-color: rgba(0, 255, 157, 0.08);
}
.shortcuts-modal {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-color: var(--card-color);
  padding: 25px;
  border-radius: 12px;
  box-shadow: 0 10px 50px rgba(0,0,0,0.5);
  z-index: 10000;
  max-width: 400px;
  width: 90%;
  border: 2px solid var(--active-color);
}
.shortcuts-modal h2 {
  color: var(--active-color);
  margin-bottom: 15px;
  text-align: center;
  font-family: 'Montserrat', sans-serif;
  font-size: 1.5rem;
}
.shortcut-category {
  margin-bottom: 15px;
}
.shortcut-category h3 {
  color: var(--active-color);
  font-size: 14px;
  margin-bottom: 8px;
  font-family: 'Montserrat', sans-serif;
  border-bottom: 1px solid var(--border-color);
  padding-bottom: 5px;
}
.shortcut-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 6px 0;
  font-size: 13px;
}
.shortcut-key {
  background-color: var(--button-bg);
  padding: 3px 6px;
  border-radius: 4px;
  font-family: monospace;
  font-size: 11px;
  border: 1px solid var(--border-color);
}
.close-shortcuts {
  position: absolute;
  top: 10px;
  right: 12px;
  background: none;
  border: none;
  color: var(--text-color);
  font-size: 18px;
  cursor: pointer;
}
.close-twitch {
  position: absolute;
  top: 10px;
  right: 12px;
  background: none;
  border: none;
  color: var(--text-color);
  font-size: 18px;
  cursor: pointer;
}
.overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0,0,0,0.7);
  z-index: 9999;
}
@media (max-width: 1200px) {
  .header {
    flex-direction: column;
    gap: 15px;
  }
  .global-controls {
    margin-left: 0;
  }
  h1 {
    position: static;
    transform: none;
  }
}
@media (max-width: 768px) {
  .container {
    grid-template-columns: 1fr;
  }
  .container.two-streams,
  .container.three-streams,
  .container.four-streams {
    grid-template-columns: 1fr;
  }
  .announcement-banner {
    padding: 10px 40px 10px 15px;
    font-size: 14px;
  }
  .left-selectors,
  .right-selectors {
    flex-direction: row;
    flex-wrap: wrap;
  }
  .left-selectors select,
  .right-selectors select {
    min-width: 120px;
  }
}
body.theater-mode {
  padding: 0;
  overflow: hidden;
  height: 100vh;
}
body.theater-mode .header,
body.theater-mode .stream-input,
body.theater-mode .left-selectors,
body.theater-mode .right-selectors,
body.theater-mode .history-dropdown {
  display: none;
}
body.theater-mode .announcement-banner {
  display: none !important;
}
body.theater-mode .container {
  height: 100vh;
  width: 100%;
  max-width: 100%;
  margin: 0;
  gap: 0 !important;
  padding: 0;
}
body.theater-mode .stream-wrapper {
  border-radius: 0;
  height: 100%;
  gap: 0 !important;
}
body.theater-mode .stream-iframe {
  display: block !important;
}
body.theater-mode .stream-wrapper:not(.loaded) {
  display: none;
}
body.theater-mode.two-streams .container {
  grid-template-columns: repeat(2, 1fr);
}
body.theater-mode.three-streams .container {
  grid-template-columns: repeat(3, 1fr);
}
body.theater-mode.four-streams .container {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  grid-template-rows: repeat(2, 1fr);
  width: 100vw;
  height: 100vh;
  margin: 0;
  padding: 0;
  gap: 0;
  overflow: hidden;
}
body.theater-mode.four-streams .stream-wrapper { 
  overflow: hidden;
  margin: 0;
  padding: 0;
}
body.theater-mode.four-streams .stream-iframe {
  width: 100%;
  height: 100%;
  display: block;
  transform: none;
}
@media (max-width: 768px) {
  body.theater-mode .container {
    grid-template-columns: 1fr !important;
    grid-template-rows: 1fr;
  }
  body.theater-mode .stream-wrapper {
    height: 100vh;
  }
  body.theater-mode.two-streams .stream-wrapper:nth-child(1) {
    height: 50vh;
  }
  body.theater-mode.two-streams .stream-wrapper:nth-child(2) {
    height: 50vh;
  }
}
.error-message {
  position: fixed;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  background-color: rgba(255, 0, 0, 0.8);
  color: white;
  padding: 10px 20px;
  border-radius: 5px;
  font-weight: 500;
  z-index: 1000;
  animation: fadeInOut 3s forwards;
}
@keyframes fadeInOut {
  0% { opacity: 0; }
  10% { opacity: 1; }
  90% { opacity: 1; }
  100% { opacity: 0; display: none; }
}
body.theater-mode .stream-controls,
body.theater-mode .stream-info {
  display: none !important;
}
</style>
</head>
<body>
<div class="announcement-banner" id="announcementBanner" style="display: none;">
<div id="announcementText"></div>
<button class="close-announcement" id="closeAnnouncement">×</button>
</div>

<div class="overlay" id="overlay"></div>
<div class="shortcuts-modal" id="shortcutsModal">
<button class="close-shortcuts" id="closeShortcuts">×</button>
<h2>Keyboard Shortcuts</h2>
<div class="shortcut-category">
<h3>Layout & Display</h3>
<div class="shortcut-item">
<span>Toggle Theater Mode</span>
<span class="shortcut-key">T</span>
</div>
<div class="shortcut-item">
<span>Cycle Layout (2/3/4)</span>
<span class="shortcut-key">L</span>
</div>
</div>
<div class="shortcut-category">
<h3>Stream Management</h3>
<div class="shortcut-item">
<span>Reset All Streams</span>
<span class="shortcut-key">R</span>
</div>
<div class="shortcut-item">
<span>Refresh All Streams</span>
<span class="shortcut-key">F5</span>
</div>
<div class="shortcut-item">
<span>Toggle Favorite</span>
<span class="shortcut-key">F</span>
</div>
</div>
<div class="shortcut-category">
<h3>Interface</h3>
<div class="shortcut-item">
<span>Show/Hide Shortcuts</span>
<span class="shortcut-key">Shift + ?</span>
</div>
<div class="shortcut-item">
<span>Close Announcement</span>
<span class="shortcut-key">X</span>
</div>
<div class="shortcut-item">
<span>Reopen Announcement</span>
<span class="shortcut-key">A</span>
</div>
<div class="shortcut-item">
<span>Clear History</span>
<span class="shortcut-key">H</span>
</div>
</div>
</div>

<div class="twitch-modal" id="twitchModal">
<button class="close-twitch" id="closeTwitch">×</button>
<h2>Twitch Streams</h2>
<div class="twitch-stream">
<div class="twitch-pfp"><img src="https://yt3.googleusercontent.com/3E8Enk5t9C95O7l-A-gi1lArZFWAVzOMVJ1aS7IfnxUsdUH8uPsZpZy1bw_4nvMc0K6o2yRP4A=s900-c-k-c0x00ffffff-no-rj" alt="Jynxzi"></div>
<div class="twitch-info">
<div class="twitch-name">Jynxzi</div>
<div class="twitch-viewers">
<i class="fas fa-eye red-eye"></i>
000k
</div>
</div>
<button class="load-twitch-btn" data-stream="jynxi">Load</button>
</div>
<div class="twitch-stream">
<div class="twitch-pfp">S1</div>
<div class="twitch-info">
<div class="twitch-name">Streamer 1</div>
<div class="twitch-viewers">
<i class="fas fa-eye red-eye"></i>
000k
</div>
</div>
<button class="load-twitch-btn" data-stream="stream1">Load</button>
</div>
<div class="twitch-stream">
<div class="twitch-pfp">S2</div>
<div class="twitch-info">
<div class="twitch-name">Streamer 2</div>
<div class="twitch-viewers">
<i class="fas fa-eye red-eye"></i>
000k
</div>
</div>
<button class="load-twitch-btn" data-stream="stream2">Load</button>
</div>
<div class="twitch-stream">
<div class="twitch-pfp">S3</div>
<div class="twitch-info">
<div class="twitch-name">Streamer 3</div>
<div class="twitch-viewers">
<i class="fas fa-eye red-eye"></i>
000k
</div>
</div>
<button class="load-twitch-btn" data-stream="stream3">Load</button>
</div>
<div class="twitch-stream">
<div class="twitch-pfp">S4</div>
<div class="twitch-info">
<div class="twitch-name">Streamer 4</div>
<div class="twitch-viewers">
<i class="fas fa-eye red-eye"></i>
000k
</div>
</div>
<button class="load-twitch-btn" data-stream="stream4">Load</button>
</div>
<div class="twitch-stream">
<div class="twitch-pfp">S5</div>
<div class="twitch-info">
<div class="twitch-name">Streamer 5</div>
<div class="twitch-viewers">
<i class="fas fa-eye red-eye"></i>
000k
</div>
</div>
<button class="load-twitch-btn" data-stream="stream5">Load</button>
</div>
<div class="twitch-stream">
<div class="twitch-pfp">S6</div>
<div class="twitch-info">
<div class="twitch-name">Streamer 6</div>
<div class="twitch-viewers">
<i class="fas fa-eye red-eye"></i>
000k
</div>
</div>
<button class="load-twitch-btn" data-stream="stream6">Load</button>
</div>
<div class="twitch-stream">
<div class="twitch-pfp">S7</div>
<div class="twitch-info">
<div class="twitch-name">Streamer 7</div>
<div class="twitch-viewers">
<i class="fas fa-eye red-eye"></i>
000k
</div>
</div>
<button class="load-twitch-btn" data-stream="stream7">Load</button>
</div>
<div class="twitch-stream">
<div class="twitch-pfp">S8</div>
<div class="twitch-info">
<div class="twitch-name">Streamer 8</div>
<div class="twitch-viewers">
<i class="fas fa-eye red-eye"></i>
000k
</div>
</div>
<button class="load-twitch-btn" data-stream="stream8">Load</button>
</div>
<div class="twitch-stream">
<div class="twitch-pfp">S9</div>
<div class="twitch-info">
<div class="twitch-name">Streamer 9</div>
<div class="twitch-viewers">
<i class="fas fa-eye red-eye"></i>
000k
</div>
</div>
<button class="load-twitch-btn" data-stream="stream9">Load</button>
</div>
</div>

<div class="header">
<a href="https://github.com/VenomousRhyme41/Multi-Stream-Viewer" class="github-btn" target="_blank">
<i class="fab fa-github"></i> GitHub
</a>
<h1>Multi-Stream Viewer</h1>
<div class="global-controls">
<button class="global-btn" id="streamLayoutBtn">4 Streams</button>
<button class="global-btn" id="theaterModeBtn">Theater Mode</button>
<span class="separator">|</span>
<button class="global-btn" id="resetAllBtn">Reset All Streams</button>
</div>
</div>
<div class="container" id="streamContainer">
<div class="stream-wrapper">
<div class="left-selectors">
<select class="favorites-dropdown">
<option value="" selected disabled>Favorites</option>
</select>
<div class="history-dropdown">
<select class="history-dropdown-select">
<option value="" selected disabled>History</option>
</select>
</div>
</div>
<div class="right-selectors">
<select class="stream-dropdown">
<option value="" selected disabled>24/7 Channels</option>
<option value="espn" class="stream-green">ESPN</option>
<option value="mlb-network" class="stream-green">MLB Network</option>
<option value="nfl-network" class="stream-green">NFL Network</option>
<option value="nba-tv" class="stream-green">NBA TV</option>
<option value="nhl-network" class="stream-green">NHL Network</option>
<option value="tennis-channel" class="stream-green">Tennis</option>
<option value="sky-sports-golf" class="stream-green">Golf</option>
<option value="sky-sports-darts" class="stream-green">Darts</option>
<option value="dazn-f1" class="stream-green">Formula 1</option>
<option value="sky-f1" class="stream-green">F1</option>
<option value="poker" class="stream-yellow">Poker</option>
<option value="fox-nrl-tv" class="stream-red">Rugby</option>
<option value="ufc-events" class="stream-red">UFC</option>
<option value="motogp" class="stream-red">MotoGP</option>
<option value="southpark" class="stream-red">South Park</option>
<option value="simpsons" class="stream-red">The Simpsons</option>
<option value="familyguy" class="stream-red">Family Guy</option>
</select>
<button class="twitch-btn" onclick="showTwitchModal()">Twitch</button>
</div>
<div class="stream-input">
<input type="text" placeholder="Paste stream URL or embed code" class="src-input">
<button class="load-stream-btn">Load Stream</button>
</div>
<iframe class="stream-iframe" allowfullscreen></iframe>
<div class="stream-controls">
<div class="stream-info"></div>
<div class="stream-buttons">
<button class="favorite-btn" title="Add to favorites">♡</button>
<button class="control-btn refresh-btn">Refresh</button>
<button class="control-btn reset-btn">Reset</button>
</div>
</div>
</div>
<div class="stream-wrapper">
<div class="left-selectors">
<select class="favorites-dropdown">
<option value="" selected disabled>Favorites</option>
</select>
<div class="history-dropdown">
<select class="history-dropdown-select">
<option value="" selected disabled>History</option>
</select>
</div>
</div>
<div class="right-selectors">
<select class="stream-dropdown">
<option value="" selected disabled>24/7 Channels</option>
<option value="espn" class="stream-green">ESPN</option>
<option value="mlb-network" class="stream-green">MLB Network</option>
<option value="nfl-network" class="stream-green">NFL Network</option>
<option value="nba-tv" class="stream-green">NBA TV</option>
<option value="nhl-network" class="stream-green">NHL Network</option>
<option value="tennis-channel" class="stream-green">Tennis</option>
<option value="sky-sports-golf" class="stream-green">Golf</option>
<option value="sky-sports-darts" class="stream-green">Darts</option>
<option value="dazn-f1" class="stream-green">Formula 1</option>
<option value="sky-f1" class="stream-green">F1</option>
<option value="poker" class="stream-yellow">Poker</option>
<option value="fox-nrl-tv" class="stream-red">Rugby</option>
<option value="ufc-events" class="stream-red">UFC</option>
<option value="motogp" class="stream-red">MotoGP</option>
<option value="southpark" class="stream-red">South Park</option>
<option value="simpsons" class="stream-red">The Simpsons</option>
<option value="familyguy" class="stream-red">Family Guy</option>
</select>
<button class="twitch-btn" onclick="showTwitchModal()">Twitch</button>
</div>
<div class="stream-input">
<input type="text" placeholder="Paste stream URL or embed code" class="src-input">
<button class="load-stream-btn">Load Stream</button>
</div>
<iframe class="stream-iframe" allowfullscreen></iframe>
<div class="stream-controls">
<div class="stream-info"></div>
<div class="stream-buttons">
<button class="favorite-btn" title="Add to favorites">♡</button>
<button class="control-btn refresh-btn">Refresh</button>
<button class="control-btn reset-btn">Reset</button>
</div>
</div>
</div>
<div class="stream-wrapper">
<div class="left-selectors">
<select class="favorites-dropdown">
<option value="" selected disabled>Favorites</option>
</select>
<div class="history-dropdown">
<select class="history-dropdown-select">
<option value="" selected disabled>History</option>
</select>
</div>
</div>
<div class="right-selectors">
<select class="stream-dropdown">
<option value="" selected disabled>24/7 Channels</option>
<option value="espn" class="stream-green">ESPN</option>
<option value="mlb-network" class="stream-green">MLB Network</option>
<option value="nfl-network" class="stream-green">NFL Network</option>
<option value="nba-tv" class="stream-green">NBA TV</option>
<option value="nhl-network" class="stream-green">NHL Network</option>
<option value="tennis-channel" class="stream-green">Tennis</option>
<option value="sky-sports-golf" class="stream-green">Golf</option>
<option value="sky-sports-darts" class="stream-green">Darts</option>
<option value="dazn-f1" class="stream-green">Formula 1</option>
<option value="sky-f1" class="stream-green">F1</option>
<option value="poker" class="stream-yellow">Poker</option>
<option value="fox-nrl-tv" class="stream-red">Rugby</option>
<option value="ufc-events" class="stream-red">UFC</option>
<option value="motogp" class="stream-red">MotoGP</option>
<option value="southpark" class="stream-red">South Park</option>
<option value="simpsons" class="stream-red">The Simpsons</option>
<option value="familyguy" class="stream-red">Family Guy</option>
</select>
<button class="twitch-btn" onclick="showTwitchModal()">Twitch</button>
</div>
<div class="stream-input">
<input type="text" placeholder="Paste stream URL or embed code" class="src-input">
<button class="load-stream-btn">Load Stream</button>
</div>
<iframe class="stream-iframe" allowfullscreen></iframe>
<div class="stream-controls">
<div class="stream-info"></div>
<div class="stream-buttons">
<button class="favorite-btn" title="Add to favorites">♡</button>
<button class="control-btn refresh-btn">Refresh</button>
<button class="control-btn reset-btn">Reset</button>
</div>
</div>
</div>
<div class="stream-wrapper">
<div class="left-selectors">
<select class="favorites-dropdown">
<option value="" selected disabled>Favorites</option>
</select>
<div class="history-dropdown">
<select class="history-dropdown-select">
<option value="" selected disabled>History</option>
</select>
</div>
</div>
<div class="right-selectors">
<select class="stream-dropdown">
<option value="" selected disabled>24/7 Channels</option>
<option value="espn" class="stream-green">ESPN</option>
<option value="mlb-network" class="stream-green">MLB Network</option>
<option value="nfl-network" class="stream-green">NFL Network</option>
<option value="nba-tv" class="stream-green">NBA TV</option>
<option value="nhl-network" class="stream-green">NHL Network</option>
<option value="tennis-channel" class="stream-green">Tennis</option>
<option value="sky-sports-golf" class="stream-green">Golf</option>
<option value="sky-sports-darts" class="stream-green">Darts</option>
<option value="dazn-f1" class="stream-green">Formula 1</option>
<option value="sky-f1" class="stream-green">F1</option>
<option value="poker" class="stream-yellow">Poker</option>
<option value="fox-nrl-tv" class="stream-red">Rugby</option>
<option value="ufc-events" class="stream-red">UFC</option>
<option value="motogp" class="stream-red">MotoGP</option>
<option value="southpark" class="stream-red">South Park</option>
<option value="simpsons" class="stream-red">The Simpsons</option>
<option value="familyguy" class="stream-red">Family Guy</option>
</select>
<button class="twitch-btn" onclick="showTwitchModal()">Twitch</button>
</div>
<div class="stream-input">
<input type="text" placeholder="Paste stream URL or embed code" class="src-input">
<button class="load-stream-btn">Load Stream</button>
</div>
<iframe class="stream-iframe" allowfullscreen></iframe>
<div class="stream-controls">
<div class="stream-info"></div>
<div class="stream-buttons">
<button class="favorite-btn" title="Add to favorites">♡</button>
<button class="control-btn refresh-btn">Refresh</button>
<button class="control-btn reset-btn">Reset</button>
</div>
</div>
</div>
</div>
<button id="exitTheaterBtn" class="exit-theater-btn" style="display: none;">Exit Theater</button>

<script>
const domain = window.location.hostname;
let isTheaterMode = false;
let streamLayout = 4;
let announcementClosed = false;
const streamLayoutBtn = document.getElementById('streamLayoutBtn');
const theaterModeBtn = document.getElementById('theaterModeBtn');
const resetAllBtn = document.getElementById('resetAllBtn');
const exitTheaterBtn = document.getElementById('exitTheaterBtn');
const resetBtns = document.querySelectorAll('.reset-btn');
const streamDropdowns = document.querySelectorAll('.stream-dropdown');
const favoritesDropdowns = document.querySelectorAll('.favorites-dropdown');
const historyDropdowns = document.querySelectorAll('.history-dropdown-select');
const favoriteBtns = document.querySelectorAll('.favorite-btn');
const announcementBanner = document.getElementById('announcementBanner');
const closeAnnouncement = document.getElementById('closeAnnouncement');
const announcementText = document.getElementById('announcementText');
const shortcutsModal = document.getElementById('shortcutsModal');
const closeShortcuts = document.getElementById('closeShortcuts');
const twitchModal = document.getElementById('twitchModal');
const closeTwitch = document.getElementById('closeTwitch');
const overlay = document.getElementById('overlay');
const loadTwitchBtns = document.querySelectorAll('.load-twitch-btn');

const channelMap = {
'espn': {
url: 'https://embedstreams.top/embed/alpha/espn/1',
name: 'ESPN'
},
'mlb-network': {
url: 'https://embedstreams.top/embed/alpha/mlb-network/1',
name: 'MLB Network'
},
'nfl-network': {
url: 'https://embedstreams.top/embed/alpha/nfl-network/1',
name: 'NFL Network'
},
'nba-tv': {
url: 'https://embedstreams.top/embed/alpha/nba-tv/1',
name: 'NBA TV'
},
'nhl-network': {
url: 'https://embedstreams.top/embed/alpha/nhl-network/1',
name: 'NHL Network'
},
'tennis-channel': {
url: 'https://embedstreams.top/embed/alpha/tennis-channel/1',
name: 'Tennis'
},
'sky-sports-golf': {
url: 'https://embedstreams.top/embed/alpha/sky-sports-golf/1',
name: 'Golf'
},
'sky-sports-darts': {
url: 'https://embedstreams.top/embed/alpha/sky-sports-darts/1',
name: 'Darts'
},
'fox-nrl-tv': {
url: 'https://embedstreams.top/embed/alpha/fox-nrl-tv/1',
name: 'Rugby'
},
'ufc-events': {
url: 'https://embedstreams.top/embed/alpha/ufc-events-ufc-mma-ufc-ppv/1',
name: 'UFC'
},
'dazn-f1': {
url: 'https://embedstreams.top/embed/alpha/dazn-formula-1-dazn-f1/1',
name: 'Formula 1'
},
'sky-f1': {
url: 'https://embedstreams.top/embed/alpha/sky-sports-f1-sky-f1/1',
name: 'F1'
},
'motogp': {
url: 'https://embedstreams.top/embed/alpha/motogp-qualifying-motogp-main-race/1',
name: 'MotoGP'
},
'poker': {
url: 'https://player.twitch.tv/?channel=pokerstars247&parent=venomousrhyme41.github.io',
name: 'Poker'
},
'southpark': {
url: 'https://vecloud.eu/stream/3b146825-9e54-4e17-b96e-c172ced342ad',
name: 'South Park'
},
'simpsons': {
url: 'https://vecloud.eu/stream/8b48e26f-e89d-47ab-abf5-04b4119273d0',
name: 'The Simpsons'
},
'familyguy': {
url: 'https://vecloud.eu/stream/d2b4b104-853f-4e4e-9edd-425a1275e90a',
name: 'Family Guy'
},
'jynxi': {
url: 'https://player.twitch.tv/?channel=jynxzi&parent=venomousrhyme41.github.io',
name: 'Jynxzi'
},
'stream1': {
url: 'https://player.twitch.tv/?channel=stream1&parent=venomousrhyme41.github.io',
name: 'Streamer 1'
},
'stream2': {
url: 'https://player.twitch.tv/?channel=stream2&parent=venomousrhyme41.github.io',
name: 'Streamer 2'
},
'stream3': {
url: 'https://player.twitch.tv/?channel=stream3&parent=venomousrhyme41.github.io',
name: 'Streamer 3'
},
'stream4': {
url: 'https://player.twitch.tv/?channel=stream4&parent=venomousrhyme41.github.io',
name: 'Streamer 4'
},
'stream5': {
url: 'https://player.twitch.tv/?channel=stream5&parent=venomousrhyme41.github.io',
name: 'Streamer 5'
},
'stream6': {
url: 'https://player.twitch.tv/?channel=stream6&parent=venomousrhyme41.github.io',
name: 'Streamer 6'
},
'stream7': {
url: 'https://player.twitch.tv/?channel=stream7&parent=venomousrhyme41.github.io',
name: 'Streamer 7'
},
'stream8': {
url: 'https://player.twitch.tv/?channel=stream8&parent=venomousrhyme41.github.io',
name: 'Streamer 8'
},
'stream9': {
url: 'https://player.twitch.tv/?channel=stream9&parent=venomousrhyme41.github.io',
name: 'Streamer 9'
}
};

function getFavorites() {
return JSON.parse(localStorage.getItem('streamFavorites') || '[]');
}

function saveFavorites(favorites) {
localStorage.setItem('streamFavorites', JSON.stringify(favorites));
}

function getHistory() {
return JSON.parse(localStorage.getItem('streamHistory') || '[]');
}

function saveHistory(history) {
localStorage.setItem('streamHistory', JSON.stringify(history.slice(0, 5)));
}

function clearHistory() {
localStorage.setItem('streamHistory', '[]');
updateHistoryDropdowns();
}

function addToHistory(src, title) {
const history = getHistory();
const existingIndex = history.findIndex(item => item.src === src);
if (existingIndex > -1) {
history.splice(existingIndex, 1);
}
history.unshift({ src, title, timestamp: Date.now() });
saveHistory(history);
updateHistoryDropdowns();
}

function toggleFavorite(src, title) {
const favorites = getFavorites();
const existingIndex = favorites.findIndex(item => item.src === src);
if (existingIndex > -1) {
favorites.splice(existingIndex, 1);
} else {
favorites.unshift({ src, title, timestamp: Date.now() });
}
saveFavorites(favorites);
updateFavoritesDropdowns();
updateFavoriteButtons();
}

function isFavorited(src) {
const favorites = getFavorites();
return favorites.some(item => item.src === src);
}

function updateFavoritesDropdowns() {
const favorites = getFavorites();
favoritesDropdowns.forEach(dropdown => {
while (dropdown.children.length > 1) {
dropdown.removeChild(dropdown.lastChild);
}
favorites.forEach(fav => {
const option = document.createElement('option');
option.value = fav.src;
option.textContent = fav.title || fav.src;
dropdown.appendChild(option);
});
});
}

function updateHistoryDropdowns() {
const history = getHistory();
historyDropdowns.forEach(dropdown => {
while (dropdown.children.length > 1) {
dropdown.removeChild(dropdown.lastChild);
}
history.forEach(item => {
const option = document.createElement('option');
option.value = item.src;
option.textContent = item.title || item.src;
dropdown.appendChild(option);
});
});
}

function updateFavoriteButtons() {
document.querySelectorAll('.stream-wrapper.loaded').forEach(wrapper => {
const iframe = wrapper.querySelector('.stream-iframe');
const favoriteBtn = wrapper.querySelector('.favorite-btn');
if (iframe.src && isFavorited(iframe.src)) {
favoriteBtn.classList.add('favorited');
favoriteBtn.innerHTML = '♥';
} else {
favoriteBtn.classList.remove('favorited');
favoriteBtn.innerHTML = '♡';
}
});
}

function showTwitchModal() {
twitchModal.style.display = 'block';
overlay.style.display = 'block';
}

function hideTwitchModal() {
twitchModal.style.display = 'none';
overlay.style.display = 'none';
}

function loadTwitchStream(streamKey) {
const channel = channelMap[streamKey];
if (channel) {
const wrapper = document.querySelector('.stream-wrapper:not(.loaded)') || document.querySelector('.stream-wrapper');
const iframe = wrapper.querySelector('.stream-iframe');
iframe.src = channel.url;
iframe.style.display = 'block';
wrapper.querySelector('.stream-input').style.display = 'none';
wrapper.querySelector('.stream-controls').style.display = 'flex';
wrapper.classList.add('loaded');
wrapper.querySelector('.stream-info').textContent = channel.name;
wrapper.querySelector('.left-selectors').style.display = 'none';
wrapper.querySelector('.right-selectors').style.display = 'none';
wrapper.querySelector('.history-dropdown').style.display = 'none';
addToHistory(channel.url, channel.name);
updateFavoriteButtons();
hideTwitchModal();
}
}

function setupKeyboardShortcuts() {
document.addEventListener('keydown', function(e) {
if (e.target.tagName === 'INPUT') return;
    
if (e.shiftKey && e.key === '?') {
if (shortcutsModal.style.display === 'block') {
hideShortcuts();
} else {
showShortcuts();
}
return;
}
    
switch(e.key.toLowerCase()) {
case 't':
toggleTheaterMode();
break;
case 'l':
toggleStreamLayout();
break;
case 'r':
resetAll();
break;
case '?':
showShortcuts();
break;
case 'f':
const activeWrapper = document.querySelector('.stream-wrapper.active, .stream-wrapper.loaded');
if (activeWrapper) {
const iframe = activeWrapper.querySelector('.stream-iframe');
const info = activeWrapper.querySelector('.stream-info');
if (iframe.src) {
toggleFavorite(iframe.src, info.textContent);
}
}
break;
case 'x':
if (announcementBanner.style.display !== 'none') {
closeAnnouncement.click();
}
break;
case 'a':
if (announcementClosed) {
announcementBanner.style.display = 'block';
announcementClosed = false;
}
break;
case 'h':
clearHistory();
showError("History cleared");
break;
case 'f5':
if (e.ctrlKey || e.metaKey) return;
e.preventDefault();
document.querySelectorAll('.refresh-btn').forEach(btn => btn.click());
break;
}
});
}

function showShortcuts() {
shortcutsModal.style.display = 'block';
overlay.style.display = 'block';
}

function hideShortcuts() {
shortcutsModal.style.display = 'none';
overlay.style.display = 'none';
}

async function fetchAnnouncement() {
try {
const response = await fetch('https://raw.githubusercontent.com/VenomousRhyme41/multi-stream-announcement-text-/refs/heads/main/text.txt');
if (response.ok) {
const text = await response.text();
const trimmedText = text.trim();
if (trimmedText && trimmedText.length > 0) {
announcementText.textContent = trimmedText;
if (!announcementClosed) {
announcementBanner.style.display = 'block';
}
} else {
announcementBanner.style.display = 'none';
}
} else {
announcementBanner.style.display = 'none';
}
} catch (error) {
announcementBanner.style.display = 'none';
}
}

closeAnnouncement.addEventListener('click', function() {
announcementBanner.style.display = 'none';
announcementClosed = true;
});

closeShortcuts.addEventListener('click', hideShortcuts);
closeTwitch.addEventListener('click', hideTwitchModal);
overlay.addEventListener('click', function() {
hideShortcuts();
hideTwitchModal();
});

loadTwitchBtns.forEach(btn => {
btn.addEventListener('click', function() {
const streamKey = this.getAttribute('data-stream');
loadTwitchStream(streamKey);
});
});

streamLayoutBtn.addEventListener('click', toggleStreamLayout);
theaterModeBtn.addEventListener('click', toggleTheaterMode);
exitTheaterBtn.addEventListener('click', toggleTheaterMode);
resetAllBtn.addEventListener('click', resetAll);

document.querySelectorAll('.load-stream-btn').forEach(btn => {
btn.addEventListener('click', function() {
loadStream(this);
});
});

resetBtns.forEach(btn => {
btn.addEventListener('click', function() {
resetStream(this);
});
});

streamDropdowns.forEach(dropdown => {
dropdown.addEventListener('change', function() {
handleDropdownChange(this);
});
});

favoritesDropdowns.forEach(dropdown => {
dropdown.addEventListener('change', function() {
handleFavoritesChange(this);
});
});

historyDropdowns.forEach(dropdown => {
dropdown.addEventListener('change', function() {
handleHistoryChange(this);
});
});

favoriteBtns.forEach(btn => {
btn.addEventListener('click', function() {
const wrapper = this.closest('.stream-wrapper');
const iframe = wrapper.querySelector('.stream-iframe');
const info = wrapper.querySelector('.stream-info');
if (iframe.src) {
toggleFavorite(iframe.src, info.textContent);
}
});
});

function handleFavoritesChange(dropdown) {
const wrapper = dropdown.closest('.stream-wrapper');
const src = dropdown.value;
if (src) {
const favorites = getFavorites();
const favorite = favorites.find(fav => fav.src === src);
if (favorite) {
const iframe = wrapper.querySelector('.stream-iframe');
iframe.src = favorite.src;
iframe.style.display = 'block';
wrapper.querySelector('.stream-input').style.display = 'none';
wrapper.querySelector('.stream-controls').style.display = 'flex';
wrapper.classList.add('loaded');
wrapper.querySelector('.stream-info').textContent = favorite.title || favorite.src;
wrapper.querySelector('.left-selectors').style.display = 'none';
wrapper.querySelector('.right-selectors').style.display = 'none';
wrapper.querySelector('.history-dropdown').style.display = 'none';
dropdown.selectedIndex = 0;
updateFavoriteButtons();
}
}
}

function handleHistoryChange(dropdown) {
const wrapper = dropdown.closest('.stream-wrapper');
const src = dropdown.value;
if (src) {
const history = getHistory();
const historyItem = history.find(item => item.src === src);
if (historyItem) {
const iframe = wrapper.querySelector('.stream-iframe');
iframe.src = historyItem.src;
iframe.style.display = 'block';
wrapper.querySelector('.stream-input').style.display = 'none';
wrapper.querySelector('.stream-controls').style.display = 'flex';
wrapper.classList.add('loaded');
wrapper.querySelector('.stream-info').textContent = historyItem.title || historyItem.src;
wrapper.querySelector('.left-selectors').style.display = 'none';
wrapper.querySelector('.right-selectors').style.display = 'none';
wrapper.querySelector('.history-dropdown').style.display = 'none';
dropdown.selectedIndex = 0;
updateFavoriteButtons();
}
}
}

document.addEventListener('DOMContentLoaded', function() {
document.querySelectorAll('.stream-controls').forEach(controls => {
controls.style.display = 'none';
});
exitTheaterBtn.style.display = 'none';
updateStreamLayout();
fetchAnnouncement();
updateFavoritesDropdowns();
updateHistoryDropdowns();
setupKeyboardShortcuts();
});

function loadStream(button) {
const wrapper = button.closest('.stream-wrapper');
const input = wrapper.querySelector('.src-input');
const iframe = wrapper.querySelector('.stream-iframe');
const inputContainer = wrapper.querySelector('.stream-input');
const controls = wrapper.querySelector('.stream-controls');
const info = wrapper.querySelector('.stream-info');
const leftSelectors = wrapper.querySelector('.left-selectors');
const rightSelectors = wrapper.querySelector('.right-selectors');
const historyDropdown = wrapper.querySelector('.history-dropdown');
let src = input.value.trim();
let title = '';

if (src.includes('<iframe')) {
const parser = new DOMParser();
const doc = parser.parseFromString(src, 'text/html');
const iframeElement = doc.querySelector('iframe');
if (iframeElement) {
src = iframeElement.getAttribute('src');
title = iframeElement.getAttribute('title') || '';
}
}

if (!src) {
showError("Please enter a valid URL or embed code");
return;
}

if (src.includes('youtube.com')) {
if (src.includes('watch?v=')) {
const videoId = src.split('v=')[1].split('&')[0];
src = `https://www.youtube.com/embed/${videoId}?autoplay=1`;
fetch(`https://noembed.com/embed?url=https://youtube.com/watch?v=${videoId}`)
.then(response => response.json())
.then(data => {
title = data.title || 'YouTube Stream';
});
} else if (src.includes('youtu.be/')) {
const videoId = src.split('youtu.be/')[1].split('?')[0];
src = `https://www.youtube.com/embed/${videoId}?autoplay=1`;
fetch(`https://noembed.com/embed?url=https://youtube.com/watch?v=${videoId}`)
.then(response => response.json())
.then(data => {
title = data.title || 'YouTube Stream';
});
} else if (src.includes('embed/')) {
const videoId = src.split('embed/')[1].split('?')[0];
fetch(`https://noembed.com/embed?url=https://youtube.com/watch?v=${videoId}`)
.then(response => response.json())
.then(data => {
title = data.title || 'YouTube Stream';
});
}
} else if (!src.startsWith('http') && !src.startsWith('//')) {
showError("Invalid URL format");
return;
}

iframe.src = src;
iframe.style.display = 'block';
inputContainer.style.display = 'none';
controls.style.display = 'flex';
wrapper.classList.add('loaded');
leftSelectors.style.display = 'none';
rightSelectors.style.display = 'none';
historyDropdown.style.display = 'none';

if (title) {
info.textContent = title;
} else {
info.textContent = src.replace(/https?:\/\/(www\.)?/, '').split('/')[0];
}

input.value = '';
addToHistory(src, title);
updateFavoriteButtons();

if (isTheaterMode) {
updateTheaterModeLayout();
}
}

function handleDropdownChange(dropdown) {
const wrapper = dropdown.closest('.stream-wrapper');
const channel = channelMap[dropdown.value];
if (channel) {
const iframe = wrapper.querySelector('.stream-iframe');
iframe.src = channel.url;
iframe.style.display = 'block';
wrapper.querySelector('.stream-input').style.display = 'none';
wrapper.querySelector('.stream-controls').style.display = 'flex';
wrapper.classList.add('loaded');
wrapper.querySelector('.stream-info').textContent = channel.name;
wrapper.querySelector('.left-selectors').style.display = 'none';
wrapper.querySelector('.right-selectors').style.display = 'none';
wrapper.querySelector('.history-dropdown').style.display = 'none';
dropdown.selectedIndex = 0;
addToHistory(channel.url, channel.name);
updateFavoriteButtons();
}
}

function toggleTheaterMode() {
isTheaterMode = !isTheaterMode;
document.body.classList.toggle('theater-mode', isTheaterMode);
exitTheaterBtn.style.display = isTheaterMode ? 'block' : 'none';
document.querySelectorAll('.left-selectors').forEach(selector => {
selector.style.display = 'none';
});
document.querySelectorAll('.right-selectors').forEach(selector => {
selector.style.display = 'none';
});
document.querySelectorAll('.history-dropdown').forEach(selector => {
selector.style.display = 'none';
});

if (isTheaterMode) {
updateTheaterModeLayout();
} else {
document.querySelectorAll('.stream-wrapper:not(.loaded) .left-selectors').forEach(selector => {
selector.style.display = 'flex';
});
document.querySelectorAll('.stream-wrapper:not(.loaded) .right-selectors').forEach(selector => {
selector.style.display = 'flex';
});
document.querySelectorAll('.stream-wrapper:not(.loaded) .history-dropdown').forEach(selector => {
selector.style.display = 'block';
});
updateStreamLayout();
}
}

function updateTheaterModeLayout() {
const loadedCount = document.querySelectorAll('.stream-wrapper.loaded').length;
document.body.classList.remove('two-streams', 'three-streams', 'four-streams');
if (loadedCount <= 2) {
document.body.classList.add('two-streams');
} else if (loadedCount === 3) {
document.body.classList.add('three-streams');
} else {
document.body.classList.add('four-streams');
}
}

function toggleStreamLayout() {
streamLayout = streamLayout === 4 ? 2 : (streamLayout === 2 ? 3 : 4);
updateStreamLayout();
streamLayoutBtn.textContent = `${streamLayout} Streams`;
}

function updateStreamLayout() {
const container = document.getElementById('streamContainer');
const streamWrappers = document.querySelectorAll('.stream-wrapper');
container.classList.remove('two-streams', 'three-streams', 'four-streams');
if (streamLayout === 2) {
container.classList.add('two-streams');
streamWrappers.forEach((wrapper, index) => {
wrapper.classList.toggle('hidden', index >= 2);
});
} else if (streamLayout === 3) {
container.classList.add('three-streams');
streamWrappers.forEach((wrapper, index) => {
wrapper.classList.toggle('hidden', index >= 3);
});
} else {
streamWrappers.forEach(wrapper => {
wrapper.classList.remove('hidden');
});
}
}

function resetStream(button) {
const wrapper = button.closest('.stream-wrapper');
const inputContainer = wrapper.querySelector('.stream-input');
const iframe = wrapper.querySelector('.stream-iframe');
const controls = wrapper.querySelector('.stream-controls');
const info = wrapper.querySelector('.stream-info');
const dropdown = wrapper.querySelector('.stream-dropdown');
const favoritesDropdown = wrapper.querySelector('.favorites-dropdown');
const historyDropdown = wrapper.querySelector('.history-dropdown-select');
const leftSelectors = wrapper.querySelector('.left-selectors');
const rightSelectors = wrapper.querySelector('.right-selectors');
const historyContainer = wrapper.querySelector('.history-dropdown');
wrapper.classList.remove('loaded');
inputContainer.style.display = '';
iframe.style.display = 'none';
controls.style.display = 'none';
iframe.src = '';
info.textContent = '';
dropdown.selectedIndex = 0;
favoritesDropdown.selectedIndex = 0;
historyDropdown.selectedIndex = 0;
leftSelectors.style.display = 'flex';
rightSelectors.style.display = 'flex';
historyContainer.style.display = 'block';

if (isTheaterMode) {
updateTheaterModeLayout();
}
}

function resetAll() {
document.querySelectorAll('.stream-wrapper').forEach(wrapper => {
const inputContainer = wrapper.querySelector('.stream-input');
const iframe = wrapper.querySelector('.stream-iframe');
const controls = wrapper.querySelector('.stream-controls');
const info = wrapper.querySelector('.stream-info');
const dropdown = wrapper.querySelector('.stream-dropdown');
const favoritesDropdown = wrapper.querySelector('.favorites-dropdown');
const historyDropdown = wrapper.querySelector('.history-dropdown-select');
const leftSelectors = wrapper.querySelector('.left-selectors');
const rightSelectors = wrapper.querySelector('.right-selectors');
const historyContainer = wrapper.querySelector('.history-dropdown');
wrapper.classList.remove('loaded');
inputContainer.style.display = '';
iframe.style.display = 'none';
controls.style.display = 'none';
iframe.src = '';
info.textContent = '';
dropdown.selectedIndex = 0;
favoritesDropdown.selectedIndex = 0;
historyDropdown.selectedIndex = 0;
leftSelectors.style.display = 'flex';
rightSelectors.style.display = 'flex';
historyContainer.style.display = 'block';
});

if (isTheaterMode) {
updateTheaterModeLayout();
}
}

function showError(message) {
const errorDiv = document.createElement('div');
errorDiv.className = 'error-message';
errorDiv.textContent = message;
document.body.appendChild(errorDiv);
setTimeout(() => {
errorDiv.remove();
}, 3000);
}

document.querySelectorAll('.refresh-btn').forEach(btn => {
btn.addEventListener('click', function () {
const wrapper = btn.closest('.stream-wrapper');
const iframe = wrapper.querySelector('.stream-iframe');
if (iframe && iframe.src) {
const currentSrc = iframe.src;
iframe.src = '';
setTimeout(() => {
iframe.src = currentSrc;
}, 100);
}
});
});
</script>
</body>
</html>
